apiVersion: monitoring.openshift.io/v1
kind: AlertingRule
metadata:
  name: oomkilled-pods-alert
  namespace: openshift-monitoring
spec:
  groups:
  - name: oomkilled-pod.rules
    rules:
    - alert: PodOOMKilled
      expr: kube_pod_container_status_last_terminated_reason{reason="OOMKilled", namespace!~"^(openshift-|kube-).*"}
      labels:
        severity: critical
      annotations:
        summary: "OOMKilled in pod '{{ $labels.pod }}' namespace '{{ $labels.namespace }}'"
        description: "Il pod '{{ $labels.pod }}' nel namespace '{{ $labels.namespace }}' Ã¨ stato terminato per OOMKilled."
